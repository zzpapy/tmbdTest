{% extends 'layout.twig' %}

{% block body %}
<div>

  <h1>{{actu}} - nombre de films trouv√© : {{films.total_results}}</h1>
  <div>
    {% if films.total_results > 20 %}
      {% if search != undifined %}
      <div id="pagination" data-size="{{films.total_pages}}" data-search="{{search}}" data-href="/?search={{search}}&page="></div>
     
      {% else %}
      <div id="pagination" data-size="{{films.total_pages}}" data-search="{{search}}" data-href="/now?page="></div> 
      {% endif %}
    {% endif %}
  </div>
  <table class="uk-table uk-table-divider uk-table-small uk-table-justify">
    <thead>
      <tr class="uk-table-middle">
        <th class="uk-text-center uk-width-1-2">Titre</th>
        <th class="uk-text-left uk-width-small">date</th>
        <th class="uk-text-center uk-width-1-2">affiche</th>
      </tr>
    </thead>
    <tbody>
      {% if films.total_results != 0 %}
      {% for film in films.results %}
      
        <tr>
            <td class="uk-text-center uk-table-middle"><a href="/film?id={{film.id}}">{{film.title}}</a></td>
            <td class="uk-text-center uk-table-middle">{{film.release_date|date('d/m/Y')}}</td>          
            <td class="uk-text-center uk-table-middle"><img class="affiche" src="https://image.tmdb.org/t/p/w500/{{film.poster_path}}" alt=""></td>
          </tr>
        
        {% endfor %}
        {% else %}
          <tr>
            <td colspan="3">Aucun film disponible</td>
          </tr>
      {% endif %}
    </tbody>
  </table>
</div>

{% endblock %}
